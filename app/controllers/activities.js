/* automatically generated by JSCoverage - do not edit */
if (typeof _$jscoverage === 'undefined') _$jscoverage = {};
if (! _$jscoverage['controllers/activities.js']) {
  _$jscoverage['controllers/activities.js'] = [];
  _$jscoverage['controllers/activities.js'][1] = 0;
  _$jscoverage['controllers/activities.js'][2] = 0;
  _$jscoverage['controllers/activities.js'][17] = 0;
  _$jscoverage['controllers/activities.js'][19] = 0;
  _$jscoverage['controllers/activities.js'][20] = 0;
  _$jscoverage['controllers/activities.js'][22] = 0;
  _$jscoverage['controllers/activities.js'][23] = 0;
  _$jscoverage['controllers/activities.js'][26] = 0;
  _$jscoverage['controllers/activities.js'][27] = 0;
  _$jscoverage['controllers/activities.js'][29] = 0;
  _$jscoverage['controllers/activities.js'][31] = 0;
  _$jscoverage['controllers/activities.js'][33] = 0;
  _$jscoverage['controllers/activities.js'][36] = 0;
  _$jscoverage['controllers/activities.js'][38] = 0;
  _$jscoverage['controllers/activities.js'][41] = 0;
  _$jscoverage['controllers/activities.js'][43] = 0;
  _$jscoverage['controllers/activities.js'][46] = 0;
  _$jscoverage['controllers/activities.js'][48] = 0;
  _$jscoverage['controllers/activities.js'][51] = 0;
  _$jscoverage['controllers/activities.js'][53] = 0;
  _$jscoverage['controllers/activities.js'][56] = 0;
  _$jscoverage['controllers/activities.js'][58] = 0;
  _$jscoverage['controllers/activities.js'][61] = 0;
  _$jscoverage['controllers/activities.js'][63] = 0;
  _$jscoverage['controllers/activities.js'][66] = 0;
  _$jscoverage['controllers/activities.js'][68] = 0;
  _$jscoverage['controllers/activities.js'][71] = 0;
  _$jscoverage['controllers/activities.js'][73] = 0;
  _$jscoverage['controllers/activities.js'][76] = 0;
  _$jscoverage['controllers/activities.js'][78] = 0;
  _$jscoverage['controllers/activities.js'][80] = 0;
  _$jscoverage['controllers/activities.js'][85] = 0;
  _$jscoverage['controllers/activities.js'][88] = 0;
  _$jscoverage['controllers/activities.js'][89] = 0;
  _$jscoverage['controllers/activities.js'][90] = 0;
  _$jscoverage['controllers/activities.js'][91] = 0;
  _$jscoverage['controllers/activities.js'][94] = 0;
  _$jscoverage['controllers/activities.js'][96] = 0;
  _$jscoverage['controllers/activities.js'][99] = 0;
  _$jscoverage['controllers/activities.js'][100] = 0;
  _$jscoverage['controllers/activities.js'][102] = 0;
  _$jscoverage['controllers/activities.js'][104] = 0;
  _$jscoverage['controllers/activities.js'][106] = 0;
  _$jscoverage['controllers/activities.js'][108] = 0;
  _$jscoverage['controllers/activities.js'][109] = 0;
  _$jscoverage['controllers/activities.js'][112] = 0;
  _$jscoverage['controllers/activities.js'][130] = 0;
  _$jscoverage['controllers/activities.js'][132] = 0;
  _$jscoverage['controllers/activities.js'][135] = 0;
  _$jscoverage['controllers/activities.js'][138] = 0;
  _$jscoverage['controllers/activities.js'][139] = 0;
  _$jscoverage['controllers/activities.js'][143] = 0;
  _$jscoverage['controllers/activities.js'][144] = 0;
  _$jscoverage['controllers/activities.js'][147] = 0;
  _$jscoverage['controllers/activities.js'][148] = 0;
  _$jscoverage['controllers/activities.js'][149] = 0;
  _$jscoverage['controllers/activities.js'][151] = 0;
  _$jscoverage['controllers/activities.js'][152] = 0;
  _$jscoverage['controllers/activities.js'][154] = 0;
  _$jscoverage['controllers/activities.js'][155] = 0;
  _$jscoverage['controllers/activities.js'][156] = 0;
  _$jscoverage['controllers/activities.js'][157] = 0;
  _$jscoverage['controllers/activities.js'][158] = 0;
  _$jscoverage['controllers/activities.js'][159] = 0;
  _$jscoverage['controllers/activities.js'][161] = 0;
  _$jscoverage['controllers/activities.js'][168] = 0;
  _$jscoverage['controllers/activities.js'][169] = 0;
  _$jscoverage['controllers/activities.js'][171] = 0;
  _$jscoverage['controllers/activities.js'][172] = 0;
  _$jscoverage['controllers/activities.js'][228] = 0;
}
_$jscoverage['controllers/activities.js'][1]++;
var Activities = (function () {
  _$jscoverage['controllers/activities.js'][2]++;
  this.respondsWith = ["html", "json", "xml", "js", "txt"];
  _$jscoverage['controllers/activities.js'][17]++;
  this.search = (function (req, resp, params) {
  _$jscoverage['controllers/activities.js'][19]++;
  console.log("params");
  _$jscoverage['controllers/activities.js'][20]++;
  console.log(params);
  _$jscoverage['controllers/activities.js'][22]++;
  var self = this;
  _$jscoverage['controllers/activities.js'][23]++;
  var hour = 3600000;
  _$jscoverage['controllers/activities.js'][26]++;
  var queryInfo = {};
  _$jscoverage['controllers/activities.js'][27]++;
  if (params.name && (typeof params.name == "string")) {
    _$jscoverage['controllers/activities.js'][29]++;
    queryInfo.name = {"like": params.name};
  }
  _$jscoverage['controllers/activities.js'][31]++;
  if (params.time1) {
    _$jscoverage['controllers/activities.js'][33]++;
    queryInfo.time1 = {gt: Math.max(parseFloat(params.time1) - hour, 0)};
  }
  _$jscoverage['controllers/activities.js'][36]++;
  if (params.time2) {
    _$jscoverage['controllers/activities.js'][38]++;
    queryInfo.time2 = {lt: Math.max(parseFloat(params.time2) + hour, 0)};
  }
  _$jscoverage['controllers/activities.js'][41]++;
  if (params.beginDate) {
    _$jscoverage['controllers/activities.js'][43]++;
    queryInfo.beginDate = {gt: parseFloat(params.beginDate)};
  }
  _$jscoverage['controllers/activities.js'][46]++;
  if (params.endDate) {
    _$jscoverage['controllers/activities.js'][48]++;
    queryInfo.endDate = {lt: parseFloat(params.beginDate)};
  }
  _$jscoverage['controllers/activities.js'][51]++;
  if (params.flag && (typeof params.time1 == "string")) {
    _$jscoverage['controllers/activities.js'][53]++;
    queryInfo.flag = params.flag;
  }
  _$jscoverage['controllers/activities.js'][56]++;
  if (params.lowPrice) {
    _$jscoverage['controllers/activities.js'][58]++;
    queryInfo.lowPrice = {gt: Math.floor(parseFloat(params.lowPrice) * 0.75)};
  }
  _$jscoverage['controllers/activities.js'][61]++;
  if (params.highPrice) {
    _$jscoverage['controllers/activities.js'][63]++;
    queryInfo.highPrice = {lt: Math.ceil(parseFloat(params.highPrice) * 1.25)};
  }
  _$jscoverage['controllers/activities.js'][66]++;
  if (params.lowNumParticipants) {
    _$jscoverage['controllers/activities.js'][68]++;
    queryInfo.lowNumParticipants = {gt: Math.floor(parseFloat(params.lowNumParticipants) * 0.9)};
  }
  _$jscoverage['controllers/activities.js'][71]++;
  if (params.highNumParticipants) {
    _$jscoverage['controllers/activities.js'][73]++;
    queryInfo.highNumParticipants = {lt: Math.ceil(parseFloat(params.highNumParticipants) * 1.1)};
  }
  _$jscoverage['controllers/activities.js'][76]++;
  if (params.category && (typeof params.category == "string")) {
    _$jscoverage['controllers/activities.js'][78]++;
    queryInfo.category = params.category;
  }
  _$jscoverage['controllers/activities.js'][80]++;
  for (var key in queryInfo) {
}
  _$jscoverage['controllers/activities.js'][85]++;
  geddy.model.Activity.search(queryInfo, parseFloat(params.latitude), parseFloat(params.longitude), (function (responseDict) {
  _$jscoverage['controllers/activities.js'][88]++;
  var max_returned = 3;
  _$jscoverage['controllers/activities.js'][89]++;
  var count = 0;
  _$jscoverage['controllers/activities.js'][90]++;
  var toReturn = [];
  _$jscoverage['controllers/activities.js'][91]++;
  for (var key in responseDict) {
    _$jscoverage['controllers/activities.js'][94]++;
    if (count >= max_returned) {
      _$jscoverage['controllers/activities.js'][96]++;
      break;
    }
    _$jscoverage['controllers/activities.js'][99]++;
    var record = responseDict[key];
    _$jscoverage['controllers/activities.js'][100]++;
    if (! record.highprice) {
      _$jscoverage['controllers/activities.js'][102]++;
      record.highprice = "0";
    }
    _$jscoverage['controllers/activities.js'][104]++;
    if (! record.lowprice) {
      _$jscoverage['controllers/activities.js'][106]++;
      record.lowprice = "0";
    }
    _$jscoverage['controllers/activities.js'][108]++;
    toReturn[count] = record;
    _$jscoverage['controllers/activities.js'][109]++;
    count += 1;
}
  _$jscoverage['controllers/activities.js'][112]++;
  self.respond(toReturn, {format: "json"});
}));
});
  _$jscoverage['controllers/activities.js'][130]++;
  this.add = (function (req, resp, params) {
  _$jscoverage['controllers/activities.js'][132]++;
  var self = this;
  _$jscoverage['controllers/activities.js'][135]++;
  geddy.model.Activity.add(params, (function createCallBack(result) {
  _$jscoverage['controllers/activities.js'][138]++;
  console.dir(result);
  _$jscoverage['controllers/activities.js'][139]++;
  self.respond(result, {format: "json"});
}));
});
  _$jscoverage['controllers/activities.js'][143]++;
  this.detail = (function (req, resp, params) {
  _$jscoverage['controllers/activities.js'][144]++;
  var self = this, User = geddy.model.User;
  _$jscoverage['controllers/activities.js'][147]++;
  var localParams = params;
  _$jscoverage['controllers/activities.js'][148]++;
  if (! localParams.errCode) {
    _$jscoverage['controllers/activities.js'][149]++;
    localParams.errCode = 0;
  }
  _$jscoverage['controllers/activities.js'][151]++;
  if (! localParams.methodType) {
    _$jscoverage['controllers/activities.js'][152]++;
    localParams.methodType = 0;
  }
  _$jscoverage['controllers/activities.js'][154]++;
  User.first({id: this.session.get("userId")}, (function (err, data) {
  _$jscoverage['controllers/activities.js'][155]++;
  var params = localParams;
  _$jscoverage['controllers/activities.js'][156]++;
  params.user = null;
  _$jscoverage['controllers/activities.js'][157]++;
  params.authType = null;
  _$jscoverage['controllers/activities.js'][158]++;
  if (data) {
    _$jscoverage['controllers/activities.js'][159]++;
    params.user = data;
  }
  _$jscoverage['controllers/activities.js'][161]++;
  self.respond(params, {format: "html", template: "app/views/activities/activityDetail"});
}));
});
  _$jscoverage['controllers/activities.js'][168]++;
  this.getActivityById = (function (req, resp, params) {
  _$jscoverage['controllers/activities.js'][169]++;
  var self = this;
  _$jscoverage['controllers/activities.js'][171]++;
  geddy.model.Activity.getById(params.activityid, (function (responseDict) {
  _$jscoverage['controllers/activities.js'][172]++;
  self.respond(responseDict, {format: "json"});
}));
});
});
_$jscoverage['controllers/activities.js'][228]++;
exports.Activities = Activities;
_$jscoverage['controllers/activities.js'].source = ["var Activities = function () {","  this.respondsWith = ['html', 'json', 'xml', 'js', 'txt'];","  /** data is of the following form","  Name: string","  time1: time","  time2: time","  flag: string startEnd, openClose, anyTime, dayTime, nightTime","  beginDate: date","  endDate: date","  lowPrice: int","  highPrice: int","  lowNumParticipants: int","  highNumParticipants: int","  latitude: number","  longitude: number","  **/","  this.search = function (req, resp, params)","  {","    console.log('params');","    console.log(params);","    // console.log(\"inSearch\");","    var self = this;","    var hour = 3600000;","    //We want to assure ourselves that the model only gets the relevant params and not anything extra","    //I use default values for fields that are left blank to make for easier queries in the model","    var queryInfo = {};","    if(params.name &amp;&amp; (typeof params.name == 'string'))","    {","      queryInfo.name = {'like': params.name};","    }","    if (params.time1)","    {","      queryInfo.time1 = {gt: Math.max(parseFloat(params.time1) - hour,0)};","    }","","    if (params.time2)","    {","      queryInfo.time2 = {lt: Math.max(parseFloat(params.time2) + hour, 0)};","    }","","    if (params.beginDate)","    {","      queryInfo.beginDate = {gt: parseFloat(params.beginDate)};","    }","","    if (params.endDate)","    {","      queryInfo.endDate = {lt: parseFloat(params.beginDate)};","    }","","    if (params.flag &amp;&amp; (typeof params.time1 == 'string'))","    {","      queryInfo.flag = params.flag;","    }","","    if (params.lowPrice)","    {","      queryInfo.lowPrice = {gt: Math.floor(parseFloat(params.lowPrice) * 0.75)};","    }","","    if (params.highPrice)","    {","      queryInfo.highPrice = {lt: Math.ceil(parseFloat(params.highPrice) * 1.25)};","    }","","    if (params.lowNumParticipants)","    {","      queryInfo.lowNumParticipants = {gt: Math.floor(parseFloat(params.lowNumParticipants) * 0.90)};","    }","","    if (params.highNumParticipants)","    {","      queryInfo.highNumParticipants = {lt: Math.ceil(parseFloat(params.highNumParticipants) * 1.1)};","    }","","    if (params.category &amp;&amp; (typeof params.category == 'string'))","    {","      queryInfo.category = params.category;","    }","    for(var key in queryInfo)","    {","      // console.log(\"queryInfo key: \"+key+\" value: \"+queryInfo[key]);","    }","","    geddy.model.Activity.search(queryInfo, parseFloat(params.latitude), parseFloat(params.longitude), function(responseDict)","    {","      //this is because 0 is represented as null in the db and we want to return free items as having cost 0 not cost null!","      var max_returned = 3;","      var count = 0;","      var toReturn = [];","      for(var key in responseDict)","      {","        ","        if(count &gt;= max_returned)","        {","          break;","        }","        // console.log(\"key is: \"+key+\" with value: \"+responseDict[key]);","        var record = responseDict[key];","        if(!record.highprice)","        {","          record.highprice = '0';","        }","        if(!record.lowprice)","        {","          record.lowprice = '0';","        }","        toReturn[count] = record;","        count+=1;","","      }","      self.respond(toReturn, {format: 'json'});","    });","  };","  /*","  this.index = function (req, resp, params) {","    var self = this;","","    geddy.model.Activity.all(function(err, activities) {","      self.respond({params: params, activities: activities});","    });","  };","  */","/*","  this.add = function (req, resp, params) {","    this.respond({params: params});","  };","*/","","  this.add = function (req, resp, params) {","","    var self = this;","    // console.log(\"activites.create reached\")","","    geddy.model.Activity.add(params, ","      function createCallBack(result){","        // console.log(\"EXECUTING CREATE ACTIVITY CALLBACK\");","        console.dir(result);","        self.respond(result, {format: 'json'});","      });","  };","","  this.detail = function (req, resp, params) {","    var self = this","      , User = geddy.model.User;","","    var localParams = params;","    if (!localParams.errCode){","      localParams.errCode = 0;","    }","    if (!localParams.methodType){","      localParams.methodType = 0;","    }","    User.first({id: this.session.get('userId')}, function (err, data) {","      var params = localParams;","      params.user = null;","      params.authType = null;","      if (data) {","        params.user = data;","      }","      self.respond(params, {","        format: 'html'","      , template: 'app/views/activities/activityDetail'","      });","    });","  };","","  this.getActivityById = function (req, resp, params) {","    var self = this;","","    geddy.model.Activity.getById(params.activityid, function (responseDict) {","      self.respond(responseDict, {format: 'json'});","    });","  };","","/*","  this.show = function (req, resp, params) {","    var self = this;","","    geddy.model.Activity.first(params.id, function(err, activity) {","      self.respond({params: params, activity: activity.toObj()});","    });","  };","  */","/*","  this.edit = function (req, resp, params) {","    var self = this;","","    geddy.model.Activity.first(params.id, function(err, activity) {","      self.respond({params: params, activity: activity});","    });","  };","  */","/*","  this.update = function (req, resp, params) {","    var self = this;","","    geddy.model.Activity.first(params.id, function(err, activity) {","      activity.updateProperties(params);","","      activity.save(function(err, data) {","        if (err) {","          params.errors = err;","          self.transfer('edit');","        } else {","          self.redirect({controller: self.name});","        }","      });","    });","  };","*/","/*","  this.destroy = function (req, resp, params) {","    var self = this;","","    geddy.model.Activity.remove(params.id, function(err) {","      if (err) {","        params.errors = err;","        self.transfer('edit');","      } else {","        self.redirect({controller: self.name});","      }","    });","  };*/","","};","","exports.Activities = Activities;"];
